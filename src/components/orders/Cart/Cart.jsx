import React, {useState, useEffect} from 'react'
import cartImg from '../../../assets/cart.svg'
import { useSelector, useDispatch } from "react-redux";

const Cart = () => {
  const [totalQuantity, setTotalQuantity] = useState(0);
  const cartNum = useSelector(store => store.cart.cartItems);

  useEffect(() => {
    let totalNum = 0;
    cartNum.forEach(item => totalNum += item.quantity);
    setTotalQuantity(totalNum);  
  }, [cartNum]);
  // console.log(cartNum.length);

  return (
    <div className="cart">
      
      <svg width="70" height="71" viewBox="0 0 70 71" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fillRule="evenodd" clipRule="evenodd" d="M8.86665 7.13815C8.31898 6.94554 7.71723 6.97837 7.19377 7.22944C6.6703 7.4805 6.26802 7.92923 6.0754 8.4769C5.88279 9.02457 5.91563 9.62633 6.16669 10.1498C6.41776 10.6732 6.86648 11.0755 7.41415 11.2681L8.17832 11.5336C10.1237 12.219 11.4042 12.6711 12.3462 13.1348C13.23 13.5694 13.6208 13.9223 13.8775 14.2956C14.14 14.6806 14.3442 15.2115 14.4608 16.2702C14.5775 17.3786 14.5804 18.8223 14.5804 20.9806V28.5698H60.445C61.4075 23.734 61.8596 21.2781 60.5967 19.6361C59.3017 17.9531 54.8771 17.9531 49.9625 17.9531H18.935C18.9217 17.2342 18.8789 16.5161 18.8067 15.8006C18.6521 14.3511 18.3108 13.0298 17.4883 11.8281C16.66 10.6148 15.5575 9.83898 14.2742 9.20606C13.0725 8.6169 11.5442 8.08023 9.74457 7.44732L8.86665 7.13815Z" fill="#F5D76E"/>
      <path d="M58.9166 35.9986L60.3749 28.9286L60.4449 28.5698H14.5833C14.5833 37.1477 14.767 39.9798 17.2958 42.6457C19.8216 45.3115 23.8874 45.3115 32.0249 45.3115H47.4891C52.042 45.3115 54.3199 45.3115 55.927 43.999C57.537 42.6865 57.9978 40.4582 58.9166 35.9986Z" fill="#F5D76E"/>
      <path d="M21.875 52.9531C23.0353 52.9531 24.1481 53.4141 24.9686 54.2345C25.7891 55.055 26.25 56.1678 26.25 57.3281C26.25 58.4884 25.7891 59.6012 24.9686 60.4217C24.1481 61.2422 23.0353 61.7031 21.875 61.7031C20.7147 61.7031 19.6019 61.2422 18.7814 60.4217C17.9609 59.6012 17.5 58.4884 17.5 57.3281C17.5 56.1678 17.9609 55.055 18.7814 54.2345C19.6019 53.4141 20.7147 52.9531 21.875 52.9531ZM48.125 52.9531C49.2853 52.9531 50.3981 53.4141 51.2186 54.2345C52.0391 55.055 52.5 56.1678 52.5 57.3281C52.5 58.4884 52.0391 59.6012 51.2186 60.4217C50.3981 61.2422 49.2853 61.7031 48.125 61.7031C46.9647 61.7031 45.8519 61.2422 45.0314 60.4217C44.2109 59.6012 43.75 58.4884 43.75 57.3281C43.75 56.1678 44.2109 55.055 45.0314 54.2345C45.8519 53.4141 46.9647 52.9531 48.125 52.9531Z" fill="#F5D76E"/>
      </svg>

      <div className="cart-num">{totalQuantity}</div>
    </div>
  )
}

export default Cart